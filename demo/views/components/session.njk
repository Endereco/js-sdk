<!-- js-sdk/demo/views/components/address.njk -->
{% import 'components/formfields.njk' as formfields %}

{% macro mirrored(
  name,
  submittedData=null
  ) 
%}

<div class="bg-gray-200 rounded-lg p-6 my-4 text-xs">
  <input type="hidden" name="{{name}}_session_counter"
    value="{{ submittedData[name+'_session_counter'] }}">
  <input type="hidden" name="{{name}}_session_id"
    value="{{ submittedData[name+'_session_id'] }}">
  <div class="flex flex-wrap -mx-3 mb-2">
    <div class="w-full px-3">
      {{ formfields.readOnlyInputField(name+'_session_id_mirror', 'Session-ID', submittedData[name+'_session_id']) }}
    </div>
    <div class="w-full px-3">
      {{ formfields.readOnlyInputField(name+'_session_counter_mirror','Session Counter', submittedData[name+'_session_counter']) }}
    </div>
  </div>

  <script>
    (function() {
      setInterval(() => {
        const idField = document.querySelector(
          "[name='{{name}}_session_id']")
        const counterField = document.querySelector(
          "[name='{{name}}_session_counter']")
        const idFieldMirror = document.querySelector(
          "[name='{{name}}_session_id_mirror']")
        const counterFieldMirror = document.querySelector(
          "[name='{{name}}_session_counter_mirror']")

        if (idField && idFieldMirror) {
          idFieldMirror.value = idField.value
        }

        if (counterField && counterFieldMirror) {
          counterFieldMirror.value = counterField.value
        }
      }, 10)
    })()
  </script>
</div>

{% endmacro %}